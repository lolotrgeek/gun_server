<html>

<body>
    <div id='state'>STATE</div>
    <button type='button' onclick="putTest()">Test!</button>
    <button type='button' onclick="testStart()">Start!</button>
    <button type='button' onclick="testStop()">Stop!</button>
</body>
<script src='../node_modules/gun/gun.js' type='text/javascript'></script>
<script>
    const port = '8765'
    const address = '192.168.1.109'
    const peers = [`http://${address}:${port}/gun`]

    const gun = new Gun({
        peers: peers,
    })
    const putTest = () => gun.get('test').put({ remote: 'hello!' + Date.now().toString() })
    const testStart = () => gun.get('test').get('running').put("RUNNING")
    const testStop = () => gun.get('test').get('running').put("PAUSED")
    const div = document.getElementById('state');

    gun.get('test').get('running').on((data, key) => {
        if (data && data === 'RUNNING') {
            div.innerHTML = 'RUNNING'
        } else {
            div.innerHTML = 'STOPPED'
        }
    })
</script>

</html>